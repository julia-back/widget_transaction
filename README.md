# Виджет успешных транзакций

## Содержание
+ Описание
+ Пример работы
+ Использование
+ Логирование
+ Тестирование

## Описание
Виджет для банковского приложения, который отображает
несколько последних успешных банковских операций клиента.
Проект содержит модули:
+ `main.py`, который реализует основную логику проекта и взаимодействие с пользователем, 
связывает функциональности вместе
+ `masks.py` для маскировки номера карты или счета
+ `processing.py` для фильтрации и сортировки списка словарей
+ `widget.py` для преобразования строки с типом и номером карты или счета и строки с датой
+ `generators.py` с генераторами
+ `decorators.py` с декораторами
+ `utils.py` для чтения json-файла
+ `external_api.py` для конвертации суммы транзакции в рубли по актуальному курсу 
+ `read_transactions.py` для чтения файлов в CSV и Excel форматах
+ `my_module.py` для поиска по транзакциям и подсчета количества транзакций в каждой категории

Для отслеживания работы функций реализованно логирование,
подробнее в разделе **Логирование** в основых модулях

## Пример работы
![пример](./data/pictures/пример_работы.png)

## Использование
Для запуска программы достаточно установить зависимости проекта и запустить главный модуль `main.py`
Также Вы можете проанализировать свои транзакции, для этого необходимо положить файл с транзакциями в директорию **data**
и заменить название файла соответствующего формата также в модуле **main.py**:
![пример_пути_файла](./data/pictures/пример_пути_файла.png)
Затем запустить модуль **main.py**.
Взаимодействие пользователя с программой реализованно через консоль. Введите ответ и нажмите **Enter**.

Научиться этим пользоваться [здесь](https://my.sky.pro/student-cabinet/stream/1912/lessons)

## Логирование

Логирование реализованно для функций в модулях: 
**masks.py** и **external_api.py**. 

Логи сохраняются в корневой папке logs:
- в файле **logs_masks.log** сообщения модуля **masks.py**
- в файле **logs_utils.log** сообщения модуля **utils.py**

Уровень логов установлен на `DEBUG`.

Формат записи лога в файл включает метку времени, название модуля, 
уровень серьезности и сообщение, описывающее событие или ошибку, которые 
произошли.

После каждого запуска файл с логами перезаписывается.

## Тестирование
Для проверки корректности работы всех функций программы предусмотрены 
модули для тестирования: 

- **test_masks.py** для функционального модуля **masks.py**
- **test_processing.py** для функционального модуля **processing.py**
- **test_widget.py** для функционального модуля **widget.py**
- **test_generators.py** для функционального модуля **generators.py**
- **test_decorators.py** для функционального модуля **decorators.py**
- **test_utils.py** для функционального модуля **utils.py**
- **test_external_api.py** для функционального модуля **external_api.py**
- **test_read_transactions.py** для функционального модуля **read_transactions.py**
- **my_module.py** для функционального модуля **test_my_module.py**

Вы можете выполнить проверку, запустив фреймворк pytest и запустив инструмент
Cove coverage с помощью команд:

`pytest --cov`
 — при активированном виртуальном окружении.
`poetry run pytest --cov`
 — через poetry.
